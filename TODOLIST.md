# 三桂日常（SanguiDaily）示例前端 UI 设计报告（Uni-app / Vue）

> 目标：做一套**不联通后端**的可交互示例前端，用来承载你已有的数据库与业务设想。整体风格偏微信朋友圈：**时间线卡片流、九宫格图片、链接卡片、单视频封面卡片**。在不破坏“朋友圈心智”的前提下加入少量“惊喜但克制”的设计点。
>  范围：只做前端 UI/交互与本地 Mock 数据结构设计，便于未来平滑对接后端。

------

## 1. 产品定位与设计目标

### 1.1 定位

- **三桂博客（SanguiBlog）**：严肃、系统化的技术与学习沉淀。
- **三桂日常（SanguiDaily）**：轻量、日常化的时间线展示。只作者发布，访客登录后仅点赞，不评论。

### 1.2 前端设计目标

1. 让用户“一眼觉得像朋友圈”，学习成本极低。
2. 让作者发布更轻松：文本、图片、链接、视频四种动态类型清晰分流。
3. 用 UI 清楚呈现你的数据库模型：用户角色、动态类型、公开/私密、置顶、点赞计数、图片列表、点赞明细。
4. 示例阶段不接后端，但所有页面状态与数据结构**按数据库字段设计**，未来对接只替换数据源。

------

## 2. 信息架构与页面清单

### 2.1 页面结构

1. **时间线（Feed）**：核心页面，卡片流展示动态。
2. **动态详情（PostDetail）**：查看完整内容、图片大图预览、视频播放页、链接跳转提示。
3. **发布动态（Composer）**：仅作者入口；四种类型分开编辑。
4. **我的（Me/Profile）**：登录状态、角色提示、基础信息（昵称/头像）、作者入口（管理）。
5. **归档（Archive）**：按月分组展示（可选，但建议做示例）。
6. **精选/置顶（Pinned/Featured）**：将置顶内容集中呈现（可选）。
7. **关于与跳转（About/GoBlog）**：展示副标题“日常时间线”，提供跳转三桂博客链接。

> 示例阶段可先实现 1~4，5~7 做成轻量入口或占位页。

------

## 3. 视觉风格规范（朋友圈基因 + 克制的细节升级）

### 3.1 整体风格

- 背景：接近微信朋友圈的浅灰白背景，卡片白底。
- 字体：系统字体；字号层级清晰（正文 14~16，辅助信息 12~13）。
- 间距：卡片间距明显，留白让内容“呼吸”。
- 交互：轻量动效，避免花哨。

### 3.2 卡片设计要点

- 头像 + 昵称 + 时间：朋友圈心智锚点（来自 `t_user.nickname/avatar_url`，若空则展示默认占位）。
- 内容区：按 `t_post.type` 渲染不同样式。
- 底部操作条：仅点赞与查看详情（不出现评论入口）。
- 私密标识：私密动态对作者可见，卡片角落有“私密”标签（不夸张、不醒目）。
- 置顶标识：置顶卡片在 Feed 顶部区域，显示“置顶”标签；排序依据 `is_pinned + pinned_at`。

------

## 4. 数据模型映射（前端 Mock 数据必须与数据库一致）

> 示例前端使用本地 `mockData.ts` 或 `pinia store` 注入数据。字段命名保持与数据库一致，便于未来直连后端。

### 4.1 User（对应 `t_user`）

- `id`：用户 id
- `openid`：微信标识（示例中可用假值）
- `role`：OWNER / VIEWER / SUSPENDED
- `nickname`、`avatar_url`
- `last_login_at`

前端用途：

- 控制“发布入口是否显示”（仅 OWNER）。
- 控制“点赞按钮是否可用”（SUSPENDED 不可用）。
- 控制“私密动态是否可见”（仅 OWNER 可见）。

### 4.2 Post（对应 `t_post`）

关键字段：

- `id`
- `author_id`
- `type`：0 文本 / 1 图片 / 2 链接 / 3 视频
- `content_text`
- 链接字段：`link_url/link_title/link_cover_url/link_site_name`
- 视频字段：`video_url/video_cover_url`
- `status`：0 公开 / 1 私密
- `is_pinned`、`pinned_at`
- `like_count`
- `created_at/updated_at/deleted_at`

前端用途：

- Feed 排序：置顶优先，其次按创建时间倒序。
- 可见性过滤：访客只看公开；作者可看公开+私密；deleted 不展示。
- 卡片渲染分支：type 决定布局。

### 4.3 PostImage（对应 `t_post_image`）

- `post_id`
- `image_url`
- `sort_order`
- `width/height/size_bytes`

前端用途：

- 图片动态九宫格渲染：按 `sort_order` 排序。
- 图片预览：点击进入预览器，左右滑动。

### 4.4 PostLike（对应 `t_post_like`）

- `post_id`
- `user_id`
- `create_at`

前端用途：

- 计算“当前用户是否已点赞”：示例阶段直接从 mock likes 查。
- 点赞按钮状态：已赞高亮、未赞灰色。
- 点赞数：优先使用 `t_post.like_count` 展示（未来以服务端为准）。

------

## 5. Feed 页面（朋友圈核心体验）

### 5.1 顶部区域

- 顶部轻量标题：**三桂日常** + 小字副标题（可滚动隐藏）。
- 右上角：
  - 若 OWNER：显示“发布”按钮
  - 若 VIEWER：显示“登录/我的”
- 过滤栏（可选）：全部 / 图片 / 链接 / 视频 / 文本
  - 过滤只是 UI 层，不改变数据库结构。

### 5.2 卡片通用结构

1. 头像（avatar_url）
2. 昵称（nickname）
3. 时间（created_at，展示相对时间或日期）
4. 私密/置顶标签（根据 status / is_pinned）
5. 正文（content_text，支持多行折叠展开）
6. 类型内容区（图片/链接/视频）
7. 底部操作：点赞 + 点赞数 + “查看详情”

### 5.3 四种动态类型的内容区设计

#### A) 纯文本（type=0）

- content_text 支持折叠：超过 5 行显示“展开”。
- 惊喜点（克制）：长文展开时带轻微渐变遮罩，和朋友圈一致但更细腻。

#### B) 图片（type=1）

- 九宫格布局：1/2/3/4/6/9 的常见排列。
- 点击图片打开预览器，显示序号（1/6）。
- 若有 width/height，可对单图做更好比例展示（不强制）。
- 惊喜点：当一条动态图片超过 6 张时，Feed 只显示前 6 张，最后一格叠加“+3”蒙层，点进详情看全量。

#### C) 链接（type=2）

链接卡片样式（朋友圈链接预览心智）：

- 左侧封面（link_cover_url 可空；为空则显示站点占位图标）
- 右侧标题（link_title，必填）+ 站点名（link_site_name 可空）
- 点击卡片：弹出确认层“即将打开外部链接”，再跳转（示例阶段只提示，不跳实际网页也可以）。

#### D) 视频（type=3）

- 卡片展示视频封面（video_cover_url），中央播放按钮。
- 点击进入详情页再播放（Feed 不自动播放）。
- 惊喜点：封面底部一行小字显示“视频”，保持克制，不做花哨动效。

------

## 6. PostDetail 页面（内容完整呈现）

### 6.1 顶部与主体

- 顶部：返回 + 标题“动态详情”
- 主体：复用卡片内容但更完整
  - 文本永远完整显示（不折叠）
  - 图片全量显示（可滑动预览）
  - 链接卡片更大，展示描述（若未来加入）
  - 视频播放器区域（示例阶段用封面 + 播放按钮占位）

### 6.2 底部动作区（只点赞）

- 点赞按钮 + 点赞数
- 不出现评论输入框，也不出现“转发”
- 若用户未登录：点击点赞弹出提示“登录后可点赞”
- 若 SUSPENDED：提示“当前账号不可点赞”

------

## 7. 发布页 Composer（仅作者）

> 发布页是示例前端最能体现数据库设计的地方：不同 type 对应不同字段必填。

### 7.1 入口与权限

- 只有 role=OWNER 才显示入口；否则不展示或显示“仅作者可发布”。

### 7.2 发布流程（分类型）

顶部：类型选择 Tab（文本 / 图片 / 链接 / 视频）

#### A) 文本发布

- 输入框：content_text
- 可见性：公开/私密（对应 status）
- 发布后生成 t_post（type=0）

#### B) 图片发布

- 文本输入（可选）
- 图片选择（1~9）
- 图片排序：长按拖拽调整 sort_order（示例阶段可用按钮模拟）
- 发布后生成：
  - t_post（type=1）
  - 多条 t_post_image（post_id + sort_order + image_url）

#### C) 链接发布

- 链接地址（link_url，必填）
- 链接标题（link_title，必填）
- 站点名称（link_site_name，可选）
- 封面地址（link_cover_url，可选，示例阶段可填 URL 或从相册选一张图生成）
- 文本说明（content_text，可选）
- 发布生成 t_post（type=2）

#### D) 视频发布

- 视频地址（video_url，必填；示例阶段可用固定假地址）
- 视频封面（video_cover_url，可选但建议）
- 文本说明（content_text，可选）
- 发布生成 t_post（type=3）

### 7.3 可见性设计（与 status 对应）

- status=0：公开
- status=1：私密
   发布页默认建议选“私密”（更贴合你低暴露度原则），但示例前端可以提供“记住上次选择”。

------

## 8. 点赞交互（与 `t_post_like` 对应）

### 8.1 点赞行为定义

- 点赞：新增一条 `t_post_like`（post_id, user_id, create_at）
- 取消点赞：删除该条记录（示例前端可直接从数组移除）
- `t_post.like_count` 同步 +1/-1（示例前端本地维护）

### 8.2 UI 呈现

- 未点赞：灰色心形/拇指图标 + like_count
- 已点赞：高亮图标 + like_count
- 点赞人数不展示名单，只展示数值（降低隐私与社交压力）

------

## 9. 排序与过滤规则（严格对应字段）

### 9.1 Feed 默认排序

1. `is_pinned=1` 的动态在最前
   - 置顶内部排序：`pinned_at desc`
2. 其他动态：`created_at desc`
3. `deleted_at != null` 的动态永不展示

### 9.2 可见性过滤

- 访客（未登录或 role=VIEWER）：只展示 `status=0`
- 作者（role=OWNER）：展示 `status=0/1`，私密动态有“私密”标识
- 封禁（role=SUSPENDED）：同访客展示规则，但点赞不可用

------

## 10. 前端目录与组件建议（示例工程层面，不写具体代码）

### 11.1 页面

- `pages/feed/index.vue`
- `pages/post-detail/index.vue`
- `pages/composer/index.vue`
- `pages/me/index.vue`
- `pages/archive/index.vue`（可选）

### 11.2 组件（强烈建议抽）

- `components/PostCard.vue`：动态卡片总入口（根据 type 分发）
- `components/PostImagesGrid.vue`：九宫格与预览
- `components/PostLinkCard.vue`：链接卡片
- `components/PostVideoCard.vue`：视频封面卡片
- `components/LikeButton.vue`：点赞按钮（含状态）
- `components/VisibilityTag.vue`：私密/置顶标签

### 11.3 Store（Mock 数据承载）

- `stores/userStore`：当前用户（对应 t_user）
- `stores/postStore`：posts 列表（t_post）
- `stores/imageStore`：images（t_post_image）
- `stores/likeStore`：likes（t_post_like）

Mock 数据结构建议直接按表字段命名，未来对接后端只替换 store 的加载逻辑。

------

## 11. 未来对接后端时的接口形态（仅供设计对齐）

示例阶段不实现，但 UI 与数据结构应预留这些“自然的输入输出”：

- 获取时间线：返回 `t_post` 列表 +（按 type 额外带）图片数组/当前用户点赞状态
- 获取详情：单条 `t_post` + 全量 `t_post_image` + 是否已赞
- 点赞/取消点赞：写 `t_post_like` + 返回新的 like_count
- 登录：返回 `t_user` 与 role

> 你现在的数据库设计已经足够支撑这些接口输出，前端示例按这个思路 Mock 即可。

------

## 12. 示例前端验收标准（不接后端也能自洽）

1. Feed 能展示四种 type，并按置顶/时间排序。
2. 访客只能看到公开动态；作者能看到私密动态且有标识。
3. 点赞按钮能切换状态并更新 like_count（本地模拟）。
4. 图片动态九宫格可预览，顺序按 sort_order。
5. 链接动态有卡片展示（标题必有，封面可无）。
6. 视频动态有封面卡片，点击进详情再“播放占位”。
7. 发布页按 type 显示必填项提示，发布后立刻出现在 Feed（本地插入数据）。