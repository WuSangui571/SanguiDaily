# SOP（AI智能体开发流程）

> 目标：让 AI 像有长期记忆的工程师一样工作：检索优先、复用优先、最小改动、可回滚、可验证。

---

## 1. 需求理解（必须输出）
- 用 3～6 条要点复述需求
- 给出验收标准
- 列出影响范围与风险点

---

## 2. 检索优先（Retrieve-First）
必须执行：
- 全局搜索关键业务词 / 接口名 / 数据模型
- 阅读入口文件 + 核心实现

必须输出“检索报告”：
- 关键词
- 候选实现（>=3）
- 复用点选择
- 是否存在重复实现风险

---

## 3. 复用/修改/新建决策
优先级：复用 > 修改 > 重构整合 > 新建

允许新建的条件（必须同时满足）：
1) 旧实现职责不适配且扩展会导致混乱
2) 不会造成双入口/双实现
3) 有迁移/删除旧代码计划
4) CHANGELOG_AI.md 记录原因

---

## 4. 编码原则
- 小步改动，可回滚
- 保持风格一致
- 不引入新依赖（除非必要并说明替代方案）

---

## 5. 提交前检查（必须完成）
按 CHECKLISTS.md 全项自检，确保：
- 无明显语法/导入/字段/路径错误
- 无重复实现
- 无越界调用
- 文档留痕更新完成

---